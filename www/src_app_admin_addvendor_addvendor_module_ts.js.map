{"version":3,"file":"src_app_admin_addvendor_addvendor_module_ts.js","mappings":"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","sources":["./src/app/admin/addvendor/addvendor-routing.module.ts","./src/app/admin/addvendor/addvendor.module.ts","./src/app/admin/addvendor/addvendor.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AddvendorPage } from './addvendor.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddvendorPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddvendorPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddvendorPageRoutingModule } from './addvendor-routing.module';\n\nimport { AddvendorPage } from './addvendor.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AddvendorPageRoutingModule\n  ],\n  declarations: [AddvendorPage]\n})\nexport class AddvendorPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { EmailValidator } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { FirebaseAuthenticationService } from 'src/app/service/firebase-authentication.service';\nimport { FirestoreService } from 'src/app/service/firestore.service';\nimport { NgForm } from '@angular/forms';\nimport { InituserService } from 'src/app/service/inituser.service';\nimport { ApiService } from 'src/app/service/api.service';\nimport { Vendor } from 'src/app/pages/models/vendor';\nimport { UtilService } from 'src/app/service/util.service';\nimport * as moment from 'moment';\n// import  './../../../assets/js/smtp.js ';\ndeclare let Email: any;\n@Component({\n  selector: 'app-addvendor',\n  templateUrl: './addvendor.page.html',\n  styleUrls: ['./addvendor.page.scss'],\n})\nexport class AddvendorPage implements OnInit {\n\n  private loggedInVendor:Vendor\n  private loggedInAdmin:any;\n  public fileupload:any;\n  public numberId:any;\n  public emailId:any;\n  TodayDate:string;\n  private venid='lilly';\n  public randomId:any\n  public passhide=false\n  public companynameNot=false\n  public companyEmailNot=false\n  public requestEmailNot=false\n  public company={\n    companyname:'',\n    companyEmail:'',\n    requestEmail:'',\n  }\n  constructor(private router:Router,\n              private firestore: FirestoreService,\n              private initUser: InituserService,\n              private api: ApiService,\n              private util: UtilService,\n              private fireauth : FirebaseAuthenticationService,) { \n                const currentDate = new Date();\n                this.TodayDate = moment(currentDate).format('YYYY-MM-DD')\n                console.log(this.TodayDate)\n              this.loggedInAdmin = this.initUser.getUserData()\n               console.log(this.loggedInAdmin.email)\n               \n              }\n\n  ngOnInit() {\n  }\n\n  moveToAd(){\n    this.router.navigate(['admin/administrator-accounts'])\n  }\n  back(){\n    this.router.navigate(['admin/invitedvendors'])\n  }\n  moveToHome(){\n    this.router.navigate(['admin/home'])\n  }\n\n  inviteNav(data){\n    if('toplevel' === data){\n      this.router.navigate(['admin/top-level'])\n    }\n    if('purchase' === data){\n      this.router.navigate(['admin/purchase-order'])\n    }\n    if('vendorinform' === data){\n      this.router.navigate(['admin/vendor-info'])\n    }\n    if('invited' === data){\n    this.router.navigate(['admin/invitedvendors'])\n  }\n  }\n  // requestEmail(event){\n  //   console.log(event.target.value)\n  //   this.company.requestEmail = event.target.value\n  // }\n\n  sendVendorEmail(){\n    // const email = new email.send()\n    Email.send({\n        Host : \"smtp.elasticemail.com\",\n        Username : \"lilypackiyam@gmail.com\",\n        Password : \"0527721E803854F2C924B66A3BAEAE2A03B2\",\n        // To : document.getElementById('requestEmail').value,\n        To : this.company.requestEmail,\n        From : 'lilypackiyam@gmail.com',\n        Subject : \"This is the subject\",\n        Body : `${'we have created a new vendor account for you.Here is the link to activate the account.'}\n                 Link: 'https://vendorweb-f72c9.web.app/pages/login',\n                 Temporary Id : ${this.numberId},\n                 password : ${this.randomId}\n                 `,\n                 \n     \n    }).then(message =>{\n      alert('message sent')\n      console.log(message)\n    })\n  }\n\n  fileuploads(){\n    console.log('companyname',this.company.companyname)\n    console.log('companyEmail',this.company.companyEmail)\n    console.log('requestEmail',this.company.requestEmail)\n    // document.getElementById('random_id').val\n    var random_id = '';\n    // var characters = 'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    var characters = '1234567890';\n    for(var i=0; i < 7; i++){\n      random_id += characters.charAt(Math.floor(Math.random() * characters.length)); \n   }\n   this.randomId = random_id\n   console.log(this.randomId)\n\n   var email_id = '';\n   // var characters = 'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n   var characters = '1234567890';\n   for(var i=0; i < 5; i++){\n     email_id += characters.charAt(Math.floor(Math.random() * characters.length)); \n     this.numberId = 'TEMP'+email_id\n     console.log(this.numberId)\n   }\n   this.emailId = this.numberId+'@gmail.com'\n   console.log(this.emailId)\n    const vendorInfo={\n      id:null,\n      companyname:this.company.companyname,\n      companyEmail:this.company.companyEmail,\n      requestEmail:this.company.requestEmail,\n      temporaryId:this.numberId,\n      temprory_password: this.randomId,\n      invite_Date: this.TodayDate,\n      login_date: null,\n      invited_by: this.loggedInAdmin.email,\n      login_level:null,\n    }\n    console.log(this.emailId, this.randomId)\n    this.fireauth.createAccount(this.emailId,this.randomId).then(user=>{\n      console.log(this.randomId)\n      console.log('user',user)\n      console.log('user',user.uid)\n      this.sendVendorEmail()\n      vendorInfo.id = user.uid;\n      // this.initUser.setToken(user.uid)\n        this.firestore.createWithId('vendorAdd', vendorInfo).then(async usr => {\n          console.log(usr);\n        //  console.log(adminInfo);\n        const toast = await this.api.createToasts('the vendor successfully added & email sent', false, 'top');\n        await toast.present();\n        this.util.goForward('admin/invitedvendors')\n        }, err => {\n          console.log(err);\n        });  \n\n        this.util.goForward('admin/addvendor')\n        this.NewPassword()\n        \n      }, async err =>{\n      // if(this.company.requestEmail.length !==0){\n       \n      // }\n      if(this.company.companyname.length ===0 && this.company.companyEmail.length ===0 && this.company.requestEmail.length ===0){\n        this.NewPassword()\n      }else{\n        const toast = await this.api.createToast('the email id is already use in by another account', false, 'top');\n        await toast.present();\n\n        if(this.company.companyname.length ===0 || this.company.companyEmail.length ===0 || this.company.requestEmail.length ===0){\n         this.NewPassword()\n        }\n      }\n\n    })\n\n  }\n\n  NewPassword(){\n    if(this.company.companyname.length ===0){\n      this.companynameNot = true\n    }else{\n      this.companynameNot = false\n    }\n    if(this.company.companyEmail.length ===0){\n      this.companyEmailNot = true\n    }else{\n      this.companyEmailNot = false\n    }\n    if(this.company.requestEmail.length ===0){\n      this.requestEmailNot = true\n    }else{\n      this.requestEmailNot = false\n    }\n  }\n}\n\n"],"names":["Component","Router","FirebaseAuthenticationService","FirestoreService","InituserService","ApiService","UtilService","moment","AddvendorPage","constructor","router","firestore","initUser","api","util","fireauth","companyname","companyEmail","requestEmail","currentDate","Date","TodayDate","format","console","log","loggedInAdmin","getUserData","email","ngOnInit","moveToAd","navigate","back","moveToHome","inviteNav","data","sendVendorEmail","Email","send","Host","Username","Password","To","company","From","Subject","Body","numberId","randomId","then","message","alert","fileuploads","random_id","characters","i","charAt","Math","floor","random","length","email_id","emailId","vendorInfo","id","temporaryId","temprory_password","invite_Date","login_date","invited_by","login_level","createAccount","user","uid","createWithId","usr","toast","createToasts","present","goForward","err","NewPassword","createToast","companynameNot","companyEmailNot","requestEmailNot","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}